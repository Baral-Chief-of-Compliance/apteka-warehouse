import{Q as s,a as F,b as x,c as C,d as v,C as w}from"./ClosePopup.064329ac.js";import{a as n}from"./QBtn.e9a2bcf7.js";import{Q as m}from"./QInput.283eb062.js";import{Q as k}from"./QRadio.7b199e82.js";import{Q as D,a as U}from"./QCard.246add5a.js";import{Q as L}from"./QPage.fb1668d3.js";import{i as c,Z as R,y as T,B as r,C as p,D as o,K as i,F as l,I as j,E as b,G as g,L as f,M as Q,N as I,z as q,a as y}from"./index.4c705956.js";import"./render.9b0eaa5f.js";import"./use-dark.371bb89c.js";import"./QItem.234b9042.js";import"./scroll.f2648681.js";import"./dom.b5015e69.js";const G={class:"q-pa-md"},K={key:0,class:"q-mt-xl column"},Z={class:"row"},H=i("span",{class:"q-ma-sm text-h5"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u043C\u0435\u0434\u0438\u043A\u0430\u043C\u0435\u043D\u0442",-1),J=i("span",{class:"q-ma-xl text-h6 center"},"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A\u0430",-1),O={class:"column"},W={class:"row"},X=i("span",{class:"q-ma-sm text-h5"},"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u043C\u0435\u0434\u0438\u043A\u0430\u043C\u0435\u043D\u0442\u0430",-1),Y=i("span",{class:"q-ma-xl text-h6 center"},"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A\u0430",-1),h={class:"column"},se={__name:"MedicationPage",setup(ee){const{getSupplier:M}=c("supplier"),{getMed:_}=c("med");c("role");const{checkRightsAdminManager:V}=c("role"),e=R({supplier:[],add_supplierID:null,update_supplierID:null,addCard:!1,updateCard:!1,add_med_name:"",add_med_category:"",add_med_dosage:"",add_med_price:"",add_med_expiration_date:"",add_med_receipts:"",update_med_name:"",update_med_category:"",update_med_dosage:"",update_med_price:"",update_med_expiration_date:"",update_med_receipts:"",update_med_id:"",medication:[],columns:[{name:"med_id",required:!0,label:"\u0418\u043D\u0434\u0435\u043A\u0441",align:"center",field:t=>t.med_id,format:t=>`${t}`,sortable:!0},{name:"med_name",align:"center",label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",field:t=>t.med_name,sortable:!0},{name:"med_category",align:"center",label:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",field:t=>t.med_category,sortable:!0},{name:"med_dosage",align:"center",label:"\u0414\u043E\u0437\u0430",field:t=>t.med_dosage,sortable:!0},{name:"med_price",align:"center",label:"\u0426\u0435\u043D\u0430(\u0440\u0443\u0431.)",field:t=>t.med_price,sortable:!0},{name:"med_expiration_date",align:"center",label:"\u0418\u0441\u0442\u0435\u0447\u0435\u043D\u0438\u0435 \u0441\u0440\u043E\u043A\u0430 \u0433\u043E\u0434\u043D\u043E\u0441\u0442\u0438",field:t=>t.med_expiration_date,sortable:!0},{name:"med_receipts",align:"center",label:"\u0414\u0430\u0442\u0430 \u043F\u043E\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u044F",field:t=>t.med_receipts,sortable:!0},{name:"update",label:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0445",align:"center"},{name:"delete",label:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043C\u0435\u0434\u0438\u043A\u0430\u043C\u0435\u043D\u0442\u0430",align:"center"}]});function $(){y.post("https://zdorovie.space/api/v1/medication",{med_name:e.add_med_name,med_category:e.add_med_category,med_dosage:e.add_med_dosage,med_price:e.add_med_price,med_expiration_date:e.add_med_expiration_date,med_receipts:e.add_med_receipts,supplierID:e.add_supplierID}).then(async t=>{e.medication=await _(),e.addCard=!1})}function B(t){y.delete(`https://zdorovie.space/api/v1/medication/${t}`).then(async()=>{e.medication=await _()})}function N(t,a,d,u,A,P,S,E){e.update_med_name=t,e.update_med_category=a,e.update_med_dosage=d,e.update_med_price=u,e.update_med_expiration_date=A,e.update_med_receipts=P,e.update_supplierID=S,e.update_med_id=E,e.updateCard=!0}function z(){y.put(`https://zdorovie.space/api/v1/medication/${e.update_med_id}`,{med_id:e.update_med_id,med_name:e.update_med_name,med_category:e.update_med_category,med_dosage:e.update_med_dosage,med_price:e.update_med_price,med_expiration_date:e.update_med_expiration_date,med_receipts:e.update_med_receipts,supplierID:e.update_supplierID}).then(async()=>{e.medication=await _(),e.updateCard=!1})}return T(async()=>{e.supplier=await M(),e.medication=await _()}),(t,a)=>(r(),p(L,null,{default:o(()=>[i("div",G,[l(F,{class:"q-mt-xl",title:"\u041C\u0435\u0434\u0438\u043A\u0430\u043C\u0435\u043D\u0442\u044B \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043D\u043D\u044B\u0445",rows:e.medication,columns:e.columns,"row-key":"name"},{"body-cell-ph_id":o(d=>[l(s,{props:d},{default:o(()=>[i("b",null,j(d.row.med_id),1)]),_:2},1032,["props"])]),"body-cell-info":o(d=>[l(s,{props:d},{default:o(()=>[l(n,{color:"primary",icon:"info"})]),_:2},1032,["props"])]),"body-cell-update":o(d=>[l(s,{props:d},{default:o(()=>[b(V)()?(r(),p(n,{key:0,color:"orange",icon:"mode_edit",onClick:u=>N(d.row.med_name,d.row.med_category,d.row.med_dosage,d.row.med_price,d.row.med_expiration_date,d.row.med_receipts,d.row.supplierID,d.row.med_id)},null,8,["onClick"])):g("",!0)]),_:2},1032,["props"])]),"body-cell-delete":o(d=>[l(s,{props:d},{default:o(()=>[b(V)()?(r(),p(n,{key:0,color:"red",icon:"delete",onClick:u=>B(d.row.med_id)},null,8,["onClick"])):g("",!0)]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),b(V)()?(r(),f("div",K,[l(n,{color:"green",icon:"add",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0435\u0434\u0438\u043A\u0430\u043C\u0435\u043D\u0442",onClick:a[0]||(a[0]=d=>e.addCard=!0)})])):g("",!0)]),l(v,{modelValue:e.addCard,"onUpdate:modelValue":a[9]||(a[9]=d=>e.addCard=d),persistent:""},{default:o(()=>[l(D,null,{default:o(()=>[l(U,{class:"items-center"},{default:o(()=>[i("div",Z,[l(x,{icon:"medication",color:"green","text-color":"white"}),H]),i("div",null,[l(m,{type:"text",label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",modelValue:e.add_med_name,"onUpdate:modelValue":a[1]||(a[1]=d=>e.add_med_name=d)},null,8,["modelValue"]),l(m,{type:"text",label:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",modelValue:e.add_med_category,"onUpdate:modelValue":a[2]||(a[2]=d=>e.add_med_category=d)},null,8,["modelValue"]),l(m,{type:"number",step:"0.01",label:"\u0414\u043E\u0437\u0430",modelValue:e.add_med_dosage,"onUpdate:modelValue":a[3]||(a[3]=d=>e.add_med_dosage=d)},null,8,["modelValue"]),l(m,{type:"number",step:"0.01",min:"0.00",max:"10000.00",label:"\u0426\u0435\u043D\u0430",modelValue:e.add_med_price,"onUpdate:modelValue":a[4]||(a[4]=d=>e.add_med_price=d)},null,8,["modelValue"]),l(m,{type:"date",label:"\u0418\u0441\u0442\u0435\u0447\u0435\u043D\u0438\u0435 \u0441\u0440\u043E\u043A\u0430 \u0433\u043E\u0434\u043D\u043E\u0441\u0442\u0438",modelValue:e.add_med_expiration_date,"onUpdate:modelValue":a[5]||(a[5]=d=>e.add_med_expiration_date=d)},null,8,["modelValue"]),l(m,{type:"date",label:"\u0414\u0430\u0442\u0430 \u043F\u043E\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u044F",modelValue:e.add_med_receipts,"onUpdate:modelValue":a[6]||(a[6]=d=>e.add_med_receipts=d)},null,8,["modelValue"])]),J,i("div",O,[(r(!0),f(I,null,Q(e.supplier,d=>(r(),p(k,{key:d.s_id,modelValue:e.add_supplierID,"onUpdate:modelValue":a[7]||(a[7]=u=>e.add_supplierID=u),val:d.s_id,label:d.s_name},null,8,["modelValue","val","label"]))),128))])]),_:1}),l(C,{align:"right"},{default:o(()=>[q(l(n,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"red"},null,512),[[w]]),e.add_supplierID!=null?(r(),p(n,{key:0,flat:"",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",color:"green",onClick:a[8]||(a[8]=d=>$())})):g("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(v,{modelValue:e.updateCard,"onUpdate:modelValue":a[18]||(a[18]=d=>e.updateCard=d),persistent:""},{default:o(()=>[l(D,null,{default:o(()=>[l(U,{class:"items-center"},{default:o(()=>[i("div",W,[l(x,{icon:"medication",color:"orange","text-color":"white"}),X]),i("div",null,[l(m,{type:"text",label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",modelValue:e.update_med_name,"onUpdate:modelValue":a[10]||(a[10]=d=>e.update_med_name=d)},null,8,["modelValue"]),l(m,{type:"text",label:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",modelValue:e.update_med_category,"onUpdate:modelValue":a[11]||(a[11]=d=>e.update_med_category=d)},null,8,["modelValue"]),l(m,{type:"number",step:"0.01",label:"\u0414\u043E\u0437\u0430",modelValue:e.update_med_dosage,"onUpdate:modelValue":a[12]||(a[12]=d=>e.update_med_dosage=d)},null,8,["modelValue"]),l(m,{type:"number",step:"0.01",label:"\u0426\u0435\u043D\u0430",min:"0.00",max:"10000.00",modelValue:e.update_med_price,"onUpdate:modelValue":a[13]||(a[13]=d=>e.update_med_price=d)},null,8,["modelValue"]),l(m,{type:"date",label:"\u0418\u0441\u0442\u0435\u0447\u0435\u043D\u0438\u0435 \u0441\u0440\u043E\u043A\u0430 \u0433\u043E\u0434\u043D\u043E\u0441\u0442\u0438",modelValue:e.update_med_expiration_date,"onUpdate:modelValue":a[14]||(a[14]=d=>e.update_med_expiration_date=d)},null,8,["modelValue"]),l(m,{type:"date",label:"\u0414\u0430\u0442\u0430 \u043F\u043E\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u044F",modelValue:e.update_med_receipts,"onUpdate:modelValue":a[15]||(a[15]=d=>e.update_med_receipts=d)},null,8,["modelValue"])]),Y,i("div",h,[(r(!0),f(I,null,Q(e.supplier,d=>(r(),p(k,{key:d.s_id,modelValue:e.update_supplierID,"onUpdate:modelValue":a[16]||(a[16]=u=>e.update_supplierID=u),val:d.s_id,label:d.s_name},null,8,["modelValue","val","label"]))),128))])]),_:1}),l(C,{align:"right"},{default:o(()=>[q(l(n,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"red"},null,512),[[w]]),(r(),p(n,{key:0,flat:"",label:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C",color:"orange",onClick:a[17]||(a[17]=d=>z())}))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{se as default};
