import{Q as m,a as B,b as C,c as g,d as b,C as v}from"./ClosePopup.064329ac.js";import{a as d}from"./QBtn.e9a2bcf7.js";import{Q as y}from"./QInput.283eb062.js";import{Q as w,a as k}from"./QCard.246add5a.js";import{Q as U}from"./QPage.fb1668d3.js";import{i as h,Z as z,y as D,B as n,C as i,D as t,K as r,F as l,I as A,E as _,G as p,z as V,a as f}from"./index.4c705956.js";import"./render.9b0eaa5f.js";import"./use-dark.371bb89c.js";import"./QItem.234b9042.js";import"./scroll.f2648681.js";import"./dom.b5015e69.js";const N={class:"q-pa-md"},P={class:"q-mt-xl column"},I={class:"row"},M=r("span",{class:"q-ma-sm text-h5"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u043E\u0433\u043E \u043F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A\u0430",-1),T={class:"row"},j=r("span",{class:"q-ma-sm text-h5"},"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A\u0430",-1),Y={__name:"SupplierPage",setup(E){const{getSupplier:u}=h("supplier"),{checkRightsAdminManager:c}=h("role"),e=z({addCard:!1,updateCard:!1,add_supplier_name:"",update_supplier_name:"",update_s_id:"",supplier:[],columns:[{name:"s_id",required:!0,label:"\u0418\u043D\u0434\u0435\u043A\u0441",align:"center",field:s=>s.s_id,format:s=>`${s}`,sortable:!0},{name:"s_name",align:"center",label:"\u0418\u043C\u044F \u043F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A\u0430",field:s=>s.s_name,sortable:!0},{name:"update",label:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0445",align:"center"},{name:"delete",label:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0441\u043A\u043B\u0430\u0434\u0430",align:"center"}]});function Q(){f.post("https://zdorovie.space/api/v1/supplier",{s_name:e.add_supplier_name}).then(async function(s){e.supplier=await u(),e.addCard=!1})}function x(s){f.delete(`https://zdorovie.space/api/v1/supplier/${s}`).then(async()=>{e.supplier=await u()})}function $(s,o){e.update_supplier_name=s,e.update_s_id=o,e.updateCard=!0}function S(){f.put(`https://zdorovie.space/api/v1/supplier/${e.update_s_id}`,{s_id:e.update_s_id,s_name:e.update_supplier_name}).then(async()=>{e.supplier=await u(),e.updateCard=!1})}return D(async()=>{e.supplier=await u()}),(s,o)=>(n(),i(U,null,{default:t(()=>[r("div",N,[l(B,{class:"q-mt-xl",title:"\u041F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A\u0438 \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043D\u043D\u044B\u0445",rows:e.supplier,columns:e.columns,"row-key":"name"},{"body-cell-ph_id":t(a=>[l(m,{props:a},{default:t(()=>[r("b",null,A(a.row.s_id),1)]),_:2},1032,["props"])]),"body-cell-info":t(a=>[l(m,{props:a},{default:t(()=>[l(d,{color:"primary",icon:"info"})]),_:2},1032,["props"])]),"body-cell-update":t(a=>[l(m,{props:a},{default:t(()=>[_(c)()?(n(),i(d,{key:0,color:"orange",icon:"mode_edit",onClick:q=>$(a.row.s_name,a.row.s_id)},null,8,["onClick"])):p("",!0)]),_:2},1032,["props"])]),"body-cell-delete":t(a=>[l(m,{props:a},{default:t(()=>[_(c)()?(n(),i(d,{key:0,color:"red",icon:"delete",onClick:q=>x(a.row.s_id)},null,8,["onClick"])):p("",!0)]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),r("div",P,[_(c)()?(n(),i(d,{key:0,color:"green",icon:"add",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A\u0430",onClick:o[0]||(o[0]=a=>e.addCard=!0)})):p("",!0)])]),l(b,{modelValue:e.addCard,"onUpdate:modelValue":o[3]||(o[3]=a=>e.addCard=a),persistent:""},{default:t(()=>[l(w,null,{default:t(()=>[l(k,{class:"items-center"},{default:t(()=>[r("div",I,[l(C,{icon:"chat",color:"green","text-color":"white"}),M]),r("div",null,[l(y,{type:"text",label:"\u0418\u043C\u044F \u043F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A\u0430",modelValue:e.add_supplier_name,"onUpdate:modelValue":o[1]||(o[1]=a=>e.add_supplier_name=a)},null,8,["modelValue"])])]),_:1}),l(g,{align:"right"},{default:t(()=>[V(l(d,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"red"},null,512),[[v]]),e.add_supplier_name.length>0?(n(),i(d,{key:0,flat:"",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",color:"green",onClick:o[2]||(o[2]=a=>Q())})):p("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(b,{modelValue:e.updateCard,"onUpdate:modelValue":o[6]||(o[6]=a=>e.updateCard=a),persistent:""},{default:t(()=>[l(w,null,{default:t(()=>[l(k,{class:"items-center"},{default:t(()=>[r("div",T,[l(C,{icon:"chat",color:"orange","text-color":"white"}),j]),r("div",null,[l(y,{type:"text",label:"\u0418\u043C\u044F \u043F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A\u0430",modelValue:e.update_supplier_name,"onUpdate:modelValue":o[4]||(o[4]=a=>e.update_supplier_name=a)},null,8,["modelValue"])])]),_:1}),l(g,{align:"right"},{default:t(()=>[V(l(d,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"red"},null,512),[[v]]),e.update_supplier_name.length>0?(n(),i(d,{key:0,flat:"",label:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C",color:"orange",onClick:o[5]||(o[5]=a=>S())})):p("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Y as default};
