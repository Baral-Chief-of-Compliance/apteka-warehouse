import{Q as i,a as q,b as g,c as V,d as C,C as v}from"./ClosePopup.064329ac.js";import{a as p}from"./QBtn.e9a2bcf7.js";import{Q as n}from"./QInput.283eb062.js";import{Q as w,a as k}from"./QCard.246add5a.js";import{Q as B}from"./QPage.fb1668d3.js";import{A as z,i as y,Z as A,y as D,B as s,C as m,D as t,K as o,F as l,I as M,E as f,G as u,z as x,a as b}from"./index.4c705956.js";import"./render.9b0eaa5f.js";import"./use-dark.371bb89c.js";import"./QItem.234b9042.js";import"./scroll.f2648681.js";import"./dom.b5015e69.js";const N={class:"q-pa-md"},I={class:"q-mt-xl column"},R={class:"row"},S=o("span",{class:"q-ma-sm text-h5"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u0443\u044E \u0430\u043F\u0442\u0435\u043A\u0443",-1),T={class:"row"},j=o("span",{class:"q-ma-sm text-h5"},"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u0430\u043F\u0442\u0435\u043A\u0438",-1),aa={__name:"PharmacyPage",setup(E){z();const{getPharmacy:_}=y("pharmacy");y("role");const{checkRightsAdminManagerPhManager:h}=y("role"),a=A({addCard:!1,updateCard:!1,add_pharmacy_name:"",add_pharmacy_address:"",add_pharmacy_phone:"",update_pharmacy_name:"",update_pharmacy_address:"",update_pharmacy_phone:"",update_ph_id:"",pharmacys:[],columns:[{name:"ph_id",required:!0,label:"\u0418\u043D\u0434\u0435\u043A\u0441",align:"center",field:r=>r.ph_id,format:r=>`${r}`,sortable:!0},{name:"ph_name",align:"center",label:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",field:r=>r.ph_name,sortable:!0},{name:"ph_address",align:"center",label:"\u0410\u0434\u0440\u0435\u0441",field:r=>r.ph_address,sortable:!0},{name:"ph_phone_number",align:"center",label:"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",field:r=>r.ph_phone_number,sortable:!0},{name:"update",label:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0445",align:"center"},{name:"delete",label:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u043F\u0442\u0435\u043A\u0438",align:"center"}]});function Q(){b.post("https://zdorovie.space/api/v1/pharmacy",{ph_address:a.add_pharmacy_address,ph_phone_number:a.add_pharmacy_phone,ph_name:a.add_pharmacy_name}).then(async r=>{a.pharmacys=await _(),a.addCard=!1})}function P(r){b.delete(`https://zdorovie.space/api/v1/pharmacy/${r}`).then(async()=>{a.pharmacys=await _()})}function U(r,d,e,c){a.update_pharmacy_name=r,a.update_pharmacy_address=d,a.update_pharmacy_phone=e,a.update_ph_id=c,a.updateCard=!0}function $(){b.put(`https://zdorovie.space/api/v1/pharmacy/${a.update_ph_id}`,{ph_id:a.update_ph_id,ph_address:a.update_pharmacy_address,ph_phone_number:a.update_pharmacy_phone,ph_name:a.update_pharmacy_name}).then(async()=>{a.pharmacys=await _(),a.updateCard=!1})}return D(async()=>{a.pharmacys=await _()}),(r,d)=>(s(),m(B,null,{default:t(()=>[o("div",N,[l(q,{class:"q-mt-xl",title:"\u0410\u043F\u0442\u0435\u043A\u0438 \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043D\u043D\u044B\u0445",rows:a.pharmacys,columns:a.columns,"row-key":"name"},{"body-cell-ph_id":t(e=>[l(i,{props:e},{default:t(()=>[o("b",null,M(e.row.ph_id),1)]),_:2},1032,["props"])]),"body-cell-info":t(e=>[l(i,{props:e},{default:t(()=>[l(p,{color:"primary",icon:"info"})]),_:2},1032,["props"])]),"body-cell-update":t(e=>[l(i,{props:e},{default:t(()=>[f(h)()?(s(),m(p,{key:0,color:"orange",icon:"mode_edit",onClick:c=>U(e.row.ph_name,e.row.ph_address,e.row.ph_phone_number,e.row.ph_id)},null,8,["onClick"])):u("",!0)]),_:2},1032,["props"])]),"body-cell-delete":t(e=>[l(i,{props:e},{default:t(()=>[f(h)()?(s(),m(p,{key:0,color:"red",icon:"delete",onClick:c=>P(e.row.ph_id)},null,8,["onClick"])):u("",!0)]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),o("div",I,[f(h)()?(s(),m(p,{key:0,color:"green",icon:"add",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0430\u043F\u0442\u0435\u043A\u0443",onClick:d[0]||(d[0]=e=>a.addCard=!0)})):u("",!0)])]),l(C,{modelValue:a.addCard,"onUpdate:modelValue":d[5]||(d[5]=e=>a.addCard=e),persistent:""},{default:t(()=>[l(w,null,{default:t(()=>[l(k,{class:"items-center"},{default:t(()=>[o("div",R,[l(g,{icon:"domain",color:"green","text-color":"white"}),S]),o("div",null,[l(n,{type:"text",label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",modelValue:a.add_pharmacy_name,"onUpdate:modelValue":d[1]||(d[1]=e=>a.add_pharmacy_name=e)},null,8,["modelValue"]),l(n,{type:"text",label:"\u0410\u0434\u0440\u0435\u0441",modelValue:a.add_pharmacy_address,"onUpdate:modelValue":d[2]||(d[2]=e=>a.add_pharmacy_address=e)},null,8,["modelValue"]),l(n,{type:"text",label:"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",modelValue:a.add_pharmacy_phone,"onUpdate:modelValue":d[3]||(d[3]=e=>a.add_pharmacy_phone=e)},null,8,["modelValue"])])]),_:1}),l(V,{align:"right"},{default:t(()=>[x(l(p,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"red"},null,512),[[v]]),a.add_pharmacy_address.length>0&&a.add_pharmacy_name.length>0&&a.add_pharmacy_phone.length>0?(s(),m(p,{key:0,flat:"",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",color:"green",onClick:d[4]||(d[4]=e=>Q())})):u("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(C,{modelValue:a.updateCard,"onUpdate:modelValue":d[10]||(d[10]=e=>a.updateCard=e),persistent:""},{default:t(()=>[l(w,null,{default:t(()=>[l(k,{class:"items-center"},{default:t(()=>[o("div",T,[l(g,{icon:"domain",color:"orange","text-color":"white"}),j]),o("div",null,[l(n,{type:"text",label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",modelValue:a.update_pharmacy_name,"onUpdate:modelValue":d[6]||(d[6]=e=>a.update_pharmacy_name=e)},null,8,["modelValue"]),l(n,{type:"text",label:"\u0410\u0434\u0440\u0435\u0441",modelValue:a.update_pharmacy_address,"onUpdate:modelValue":d[7]||(d[7]=e=>a.update_pharmacy_address=e)},null,8,["modelValue"]),l(n,{type:"text",label:"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",modelValue:a.update_pharmacy_phone,"onUpdate:modelValue":d[8]||(d[8]=e=>a.update_pharmacy_phone=e)},null,8,["modelValue"])])]),_:1}),l(V,{align:"right"},{default:t(()=>[x(l(p,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"red"},null,512),[[v]]),a.update_pharmacy_name.length>0&&a.update_pharmacy_address.length>0&&a.update_pharmacy_phone.length>0?(s(),m(p,{key:0,flat:"",label:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C",color:"orange",onClick:d[9]||(d[9]=e=>$())})):u("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{aa as default};
