import{Q as h,a as z,b,c as g,d as C,C as V}from"./ClosePopup.064329ac.js";import{a as s}from"./QBtn.e9a2bcf7.js";import{Q as u}from"./QInput.283eb062.js";import{Q as v,a as y}from"./QCard.246add5a.js";import{Q as B}from"./QPage.fb1668d3.js";import{A,i as k,Z as D,y as P,$ as I,B as n,C as i,D as r,a as m,K as l,F as d,I as M,E as c,G as p,z as x}from"./index.4c705956.js";import"./render.9b0eaa5f.js";import"./use-dark.371bb89c.js";import"./QItem.234b9042.js";import"./scroll.f2648681.js";import"./dom.b5015e69.js";const N={class:"q-pa-md"},R={class:"q-mt-xl column"},S={class:"row"},T=l("span",{class:"q-ma-sm text-h5"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0441\u043A\u043B\u0430\u0434",-1),j={class:"row"},E=l("span",{class:"q-ma-sm text-h5"},"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u0441\u043A\u043B\u0430\u0434\u0430",-1),oe={__name:"WarehousePage",setup(F){const Q=A();k("role");const{checkRightsAdminManagerPhManager:f}=k("role"),e=D({addCard:!1,updateCard:!1,add_warehouse_director:"",add_warehouse_address:"",add_warehouse_phone:"",update_warehouse_director:"",update_warehouse_address:"",update_warehouse_phone:"",update_w_id:"",warehouse:[],columns:[{name:"w_id",required:!0,label:"\u0418\u043D\u0434\u0435\u043A\u0441",align:"center",field:t=>t.w_id,format:t=>`${t}`,sortable:!0},{name:"w_director",align:"center",label:"\u0414\u0438\u0440\u0435\u043A\u0442\u043E\u0440",field:t=>t.w_director,sortable:!0},{name:"w_address",align:"center",label:"\u0410\u0434\u0440\u0435\u0441",field:t=>t.w_address,sortable:!0},{name:"w_phone_number",align:"center",label:"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",field:t=>t.w_phone_number,sortable:!0},{name:"info",label:"\u0418\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F",align:"center"},{name:"update",label:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0445",align:"center"},{name:"delete",label:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0441\u043A\u043B\u0430\u0434\u0430",align:"center"}]});function _(){m.get("https://zdorovie.space/api/v1/warehouse").then(function(t){e.warehouse=t.data.warehouse})}function U(){m.post("https://zdorovie.space/api/v1/warehouse",{w_address:e.add_warehouse_address,w_phone_number:e.add_warehouse_phone,w_director:e.add_warehouse_director}).then(function(t){_(),e.addCard=!1})}function $(t){m.delete(`https://zdorovie.space/api/v1/warehouse/${t}`).then(()=>{_()})}function q(t,o,a,w){e.update_warehouse_director=t,e.update_warehouse_address=o,e.update_warehouse_phone=a,e.update_w_id=w,e.updateCard=!0}function W(){m.put(`https://zdorovie.space/api/v1/warehouse/${e.update_w_id}`,{w_id:e.update_w_id,w_address:e.update_warehouse_address,w_phone_number:e.update_warehouse_phone,w_director:e.update_warehouse_director}).then(()=>{_(),e.updateCard=!1})}return P(()=>{_()}),I(()=>{_()}),(t,o)=>(n(),i(B,null,{default:r(()=>[l("div",N,[d(z,{class:"q-mt-xl",title:"\u0421\u043A\u043B\u0430\u0434\u044B \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043D\u043D\u044B\u0445",rows:e.warehouse,columns:e.columns,"row-key":"name"},{"body-cell-ph_id":r(a=>[d(h,{props:a},{default:r(()=>[l("b",null,M(a.row.w_id),1)]),_:2},1032,["props"])]),"body-cell-info":r(a=>[d(h,{props:a},{default:r(()=>[d(s,{color:"primary",icon:"info",onClick:w=>c(Q).push({name:"WarehouseInfo",params:{w_id:a.row.w_id}})},null,8,["onClick"])]),_:2},1032,["props"])]),"body-cell-update":r(a=>[d(h,{props:a},{default:r(()=>[c(f)()?(n(),i(s,{key:0,color:"orange",icon:"mode_edit",onClick:w=>q(a.row.w_director,a.row.w_address,a.row.w_phone_number,a.row.w_id)},null,8,["onClick"])):p("",!0)]),_:2},1032,["props"])]),"body-cell-delete":r(a=>[d(h,{props:a},{default:r(()=>[c(f)()?(n(),i(s,{key:0,color:"red",icon:"delete",onClick:w=>$(a.row.w_id)},null,8,["onClick"])):p("",!0)]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),l("div",R,[c(f)()?(n(),i(s,{key:0,color:"green",icon:"add",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u043A\u043B\u0430\u0434",onClick:o[0]||(o[0]=a=>e.addCard=!0)})):p("",!0)])]),d(C,{modelValue:e.addCard,"onUpdate:modelValue":o[5]||(o[5]=a=>e.addCard=a),persistent:""},{default:r(()=>[d(v,null,{default:r(()=>[d(y,{class:"items-center"},{default:r(()=>[l("div",S,[d(b,{icon:"warehouse",color:"green","text-color":"white"}),T]),l("div",null,[d(u,{type:"text",label:"\u0414\u0438\u0440\u0435\u043A\u0442\u043E\u0440",modelValue:e.add_warehouse_director,"onUpdate:modelValue":o[1]||(o[1]=a=>e.add_warehouse_director=a)},null,8,["modelValue"]),d(u,{type:"text",label:"\u0410\u0434\u0440\u0435\u0441",modelValue:e.add_warehouse_address,"onUpdate:modelValue":o[2]||(o[2]=a=>e.add_warehouse_address=a)},null,8,["modelValue"]),d(u,{type:"text",label:"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",modelValue:e.add_warehouse_phone,"onUpdate:modelValue":o[3]||(o[3]=a=>e.add_warehouse_phone=a)},null,8,["modelValue"])])]),_:1}),d(g,{align:"right"},{default:r(()=>[x(d(s,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"red"},null,512),[[V]]),e.add_warehouse_address.length>0&&e.add_warehouse_director.length>0&&e.add_warehouse_phone.length>0?(n(),i(s,{key:0,flat:"",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",color:"green",onClick:o[4]||(o[4]=a=>U())})):p("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),d(C,{modelValue:e.updateCard,"onUpdate:modelValue":o[10]||(o[10]=a=>e.updateCard=a),persistent:""},{default:r(()=>[d(v,null,{default:r(()=>[d(y,{class:"items-center"},{default:r(()=>[l("div",j,[d(b,{icon:"warehouse",color:"orange","text-color":"white"}),E]),l("div",null,[d(u,{type:"text",label:"\u0414\u0438\u0440\u0435\u043A\u0442\u043E\u0440",modelValue:e.update_warehouse_director,"onUpdate:modelValue":o[6]||(o[6]=a=>e.update_warehouse_director=a)},null,8,["modelValue"]),d(u,{type:"text",label:"\u0410\u0434\u0440\u0435\u0441",modelValue:e.update_warehouse_address,"onUpdate:modelValue":o[7]||(o[7]=a=>e.update_warehouse_address=a)},null,8,["modelValue"]),d(u,{type:"text",label:"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",modelValue:e.update_warehouse_phone,"onUpdate:modelValue":o[8]||(o[8]=a=>e.update_warehouse_phone=a)},null,8,["modelValue"])])]),_:1}),d(g,{align:"right"},{default:r(()=>[x(d(s,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"red"},null,512),[[V]]),e.update_warehouse_director.length>0&&e.update_warehouse_address.length>0&&e.update_warehouse_phone.length>0?(n(),i(s,{key:0,flat:"",label:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C",color:"orange",onClick:o[9]||(o[9]=a=>W())})):p("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{oe as default};
