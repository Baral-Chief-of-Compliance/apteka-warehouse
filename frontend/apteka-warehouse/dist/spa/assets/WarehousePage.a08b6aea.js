import{Q as h,a as B,b as g,c as b,d as C,C as V}from"./ClosePopup.3791ff27.js";import{a as s}from"./QBtn.e62c2945.js";import{Q as u}from"./QInput.82679288.js";import{Q as v,a as k}from"./QCard.740ecce4.js";import{Q as W}from"./QPage.1d4a5116.js";import{A,i as y,Z as P,y as D,$ as I,B as n,C as i,D as r,a as m,K as l,F as t,I as M,E as c,G as p,z as x}from"./index.01f3f215.js";import"./render.5369a479.js";import"./use-dark.9ed0a3a8.js";import"./QItem.eab1b99a.js";import"./scroll.7e6533da.js";import"./dom.9e0a715e.js";const N={class:"q-pa-md"},S={class:"q-mt-xl column"},T={class:"row"},R=l("span",{class:"q-ma-sm text-h5"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0441\u043A\u043B\u0430\u0434",-1),j={class:"row"},E=l("span",{class:"q-ma-sm text-h5"},"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u0441\u043A\u043B\u0430\u0434\u0430",-1),oe={__name:"WarehousePage",setup(F){const Q=A();y("role");const{checkRightsAdminManagerPhManager:f}=y("role"),e=P({addCard:!1,updateCard:!1,add_warehouse_director:"",add_warehouse_address:"",add_warehouse_phone:"",update_warehouse_director:"",update_warehouse_address:"",update_warehouse_phone:"",update_w_id:"",warehouse:[],columns:[{name:"w_id",required:!0,label:"\u0418\u043D\u0434\u0435\u043A\u0441",align:"center",field:d=>d.w_id,format:d=>`${d}`,sortable:!0},{name:"w_director",align:"center",label:"\u0414\u0438\u0440\u0435\u043A\u0442\u043E\u0440",field:d=>d.w_director,sortable:!0},{name:"w_address",align:"center",label:"\u0410\u0434\u0440\u0435\u0441",field:d=>d.w_address,sortable:!0},{name:"w_phone_number",align:"center",label:"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",field:d=>d.w_phone_number,sortable:!0},{name:"info",label:"\u0418\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F",align:"center"},{name:"update",label:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0445",align:"center"},{name:"delete",label:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0441\u043A\u043B\u0430\u0434\u0430",align:"center"}]});function _(){m.get("https://zdorovie.space/api/v1/warehouse",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}).then(function(d){e.warehouse=d.data.warehouse}).catch(function(d){returnToLigonPage()})}function $(){m.post("https://zdorovie.space/api/v1/warehouse",{w_address:e.add_warehouse_address,w_phone_number:e.add_warehouse_phone,w_director:e.add_warehouse_director}).then(function(d){_(),e.addCard=!1})}function U(d){m.delete(`https://zdorovie.space/api/v1/warehouse/${d}`).then(()=>{_()})}function q(d,o,a,w){e.update_warehouse_director=d,e.update_warehouse_address=o,e.update_warehouse_phone=a,e.update_w_id=w,e.updateCard=!0}function z(){m.put(`https://zdorovie.space/api/v1/warehouse/${e.update_w_id}`,{w_id:e.update_w_id,w_address:e.update_warehouse_address,w_phone_number:e.update_warehouse_phone,w_director:e.update_warehouse_director}).then(()=>{_(),e.updateCard=!1})}return D(()=>{_()}),I(()=>{_()}),(d,o)=>(n(),i(W,null,{default:r(()=>[l("div",N,[t(B,{class:"q-mt-xl",title:"\u0421\u043A\u043B\u0430\u0434\u044B \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043D\u043D\u044B\u0445",rows:e.warehouse,columns:e.columns,"row-key":"name"},{"body-cell-ph_id":r(a=>[t(h,{props:a},{default:r(()=>[l("b",null,M(a.row.w_id),1)]),_:2},1032,["props"])]),"body-cell-info":r(a=>[t(h,{props:a},{default:r(()=>[t(s,{color:"primary",icon:"info",onClick:w=>c(Q).push({name:"WarehouseInfo",params:{w_id:a.row.w_id}})},null,8,["onClick"])]),_:2},1032,["props"])]),"body-cell-update":r(a=>[t(h,{props:a},{default:r(()=>[c(f)()?(n(),i(s,{key:0,color:"orange",icon:"mode_edit",onClick:w=>q(a.row.w_director,a.row.w_address,a.row.w_phone_number,a.row.w_id)},null,8,["onClick"])):p("",!0)]),_:2},1032,["props"])]),"body-cell-delete":r(a=>[t(h,{props:a},{default:r(()=>[c(f)()?(n(),i(s,{key:0,color:"red",icon:"delete",onClick:w=>U(a.row.w_id)},null,8,["onClick"])):p("",!0)]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),l("div",S,[c(f)()?(n(),i(s,{key:0,color:"green",icon:"add",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u043A\u043B\u0430\u0434",onClick:o[0]||(o[0]=a=>e.addCard=!0)})):p("",!0)])]),t(C,{modelValue:e.addCard,"onUpdate:modelValue":o[5]||(o[5]=a=>e.addCard=a),persistent:""},{default:r(()=>[t(v,null,{default:r(()=>[t(k,{class:"items-center"},{default:r(()=>[l("div",T,[t(g,{icon:"warehouse",color:"green","text-color":"white"}),R]),l("div",null,[t(u,{type:"text",label:"\u0414\u0438\u0440\u0435\u043A\u0442\u043E\u0440",modelValue:e.add_warehouse_director,"onUpdate:modelValue":o[1]||(o[1]=a=>e.add_warehouse_director=a)},null,8,["modelValue"]),t(u,{type:"text",label:"\u0410\u0434\u0440\u0435\u0441",modelValue:e.add_warehouse_address,"onUpdate:modelValue":o[2]||(o[2]=a=>e.add_warehouse_address=a)},null,8,["modelValue"]),t(u,{type:"text",label:"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",modelValue:e.add_warehouse_phone,"onUpdate:modelValue":o[3]||(o[3]=a=>e.add_warehouse_phone=a)},null,8,["modelValue"])])]),_:1}),t(b,{align:"right"},{default:r(()=>[x(t(s,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"red"},null,512),[[V]]),e.add_warehouse_address.length>0&&e.add_warehouse_director.length>0&&e.add_warehouse_phone.length>0?(n(),i(s,{key:0,flat:"",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",color:"green",onClick:o[4]||(o[4]=a=>$())})):p("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(C,{modelValue:e.updateCard,"onUpdate:modelValue":o[10]||(o[10]=a=>e.updateCard=a),persistent:""},{default:r(()=>[t(v,null,{default:r(()=>[t(k,{class:"items-center"},{default:r(()=>[l("div",j,[t(g,{icon:"warehouse",color:"orange","text-color":"white"}),E]),l("div",null,[t(u,{type:"text",label:"\u0414\u0438\u0440\u0435\u043A\u0442\u043E\u0440",modelValue:e.update_warehouse_director,"onUpdate:modelValue":o[6]||(o[6]=a=>e.update_warehouse_director=a)},null,8,["modelValue"]),t(u,{type:"text",label:"\u0410\u0434\u0440\u0435\u0441",modelValue:e.update_warehouse_address,"onUpdate:modelValue":o[7]||(o[7]=a=>e.update_warehouse_address=a)},null,8,["modelValue"]),t(u,{type:"text",label:"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",modelValue:e.update_warehouse_phone,"onUpdate:modelValue":o[8]||(o[8]=a=>e.update_warehouse_phone=a)},null,8,["modelValue"])])]),_:1}),t(b,{align:"right"},{default:r(()=>[x(t(s,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"red"},null,512),[[V]]),e.update_warehouse_director.length>0&&e.update_warehouse_address.length>0&&e.update_warehouse_phone.length>0?(n(),i(s,{key:0,flat:"",label:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C",color:"orange",onClick:o[9]||(o[9]=a=>z())})):p("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{oe as default};
